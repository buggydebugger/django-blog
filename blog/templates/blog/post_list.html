{% extends "index.html" %}
{% load staticfiles %}

{% block custom_css %}
    <link rel="stylesheet" type="text/css" href="{% static "css/bootstrap-dialog.min.css" %}">
{% endblock custom_css %}


{% block custom_js %}

<script type="text/javascript" src="{% static "js/del-post.js" %}"></script>
<script type="text/javascript" src="{% static "js/get-set.js" %}"></script>
<script type="text/javascript" src="{% static "js/bootstrap-dialog.min.js" %}"></script>
{% endblock custom_js %}
 {%  block content %}

<h1>Posts</h1>

<ul>
{% for post in object_list %}
<div class="panel panel-info">
<div class="panel-heading">
    <li id="post-{{ forloop.counter }}">
<input type="hidden" id="slug-{{ forloop.counter }}" name="slug" value="{{post.slug}}" />
        <h2 id="post_title">{{ post.title }}</h2> 

        <h3 id="post_content">
            <pre  style="white-space: pre-wrap;">{{ post.content | truncatechars:350 }}</pre>
        </h3>

        <h4 id="post_date">{{post.pub_date}}</h4><h4 id="post_author">{{post.author.username}}</h4>


        <select id="post_status" class="form-control">
  <option value="PUB" {% ifequal post.status "PUB"  %} selected 
      
  {% endifequal %}>Published</option>
  <option value="UP" {% ifequal post.status "UP"  %} selected 
      
  {% endifequal %}>Unpublished</option>
  <option value="B" {% ifequal post.status "B"  %} selected 
      
  {% endifequal %}>Blocked</option>
</select>










</br>
        
        <a id="read" class="btn btn-primary" href="{{post.get_absolute_url}}"><span class="glyphicon glyphicon-eye-open"></span>  Read..</a> 

        
         	 {% ifequal   request.user post.author%}
             <a id="del_btn" class="btn btn-danger" href="{% url 'blog:postdelete' slug=post.slug%}"><span class="glyphicon glyphicon-remove"></span> Delete</a>  

             <a id="update_btn" class="btn btn-warning" href="{% url 'blog:postupdate' slug=post.slug %}"><span class="glyphicon glyphicon-edit"></span> Update..</a> 
             {% endifequal %}

             <span id="statuslbl" class="label {% ifequal post.status "PUB"  %}label-success {% endifequal %}{% ifequal post.status "B"  %}label-danger {% endifequal %}{% ifequal post.status "UP"  %}label-info {% endifequal %}">{{post.status}}</span>
        
    </li>

     	
     

    </div>
    </div>
{% empty %}
    <li>No posts yet.</li>
{% endfor %}
</ul>

{% if is_paginated %}
        <div style="position: fixed; bottom: 1%;left:42%" class="pagination">
        <h3>
            <span class="page-links">
            <div style="position: fixed; bottom: 1%; left:44%" >
                {# {% if page_obj.has_previous %} #}
                    <a id="previous" onclick="return get_set(this.getAttribute('href'))" style="display: none" href=""><span class="glyphicon glyphicon-fast-backward"></span></a>
                {# {% endif %} #}
                </div>
                <div style="position: fixed; bottom: 1%; left:46%" >
                <span id="page-count" class="page-current">
                    Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
                </span>
                {% if page_obj.has_next %}
                    <a id="next" onclick="return get_set(this.getAttribute('href'))" href="{% url 'blog:postlist'   %}?page={{page_obj.next_page_number}}"><span class="glyphicon glyphicon-fast-forward"></span></a>
                {% endif %}
                </div>
            </span>
        </h3>
        </div>
    {% endif %}
 {%  endblock content %}
